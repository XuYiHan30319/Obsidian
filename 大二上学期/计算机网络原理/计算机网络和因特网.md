## 什么是因特网
智能手机，平板等设备都被称为 #端系统 或者 #主机 。端系统都称为 #网络边缘 。端系统和主机通过通信连路和分组交换机连接到一起。不同链路以不同的速率传输数据，传输速率以比特/秒来度量。当一台端系统向另一台端系统发送数据时，发送端系统将数据分段，并未每段加上首部字节。由此形成的信息报被称为 #分组 。分组通过网络发送到目的的端系统，并在那里被转配成原始数据.
分组交换机从他的一条通信链路接受到达的分组，并从他的一条出通信连路转发该分组。最著名的 #分组交换机 为**路由器**和**链路层交换机**。他们朝着最终目的地转发分组。链路层交换机通常接入网中，而路由器通常用于网络核心。从发送端系统到接收端系统，一个分组所经历的一系列通信连路和分组交换机被称为通过该网络的**路径**。
可以把网络形象化成：分组是卡车，承载数据，通信连路类似于高速公路和公路，分组交换机类似分叉口，端系统类似建筑物。
端系统通过 #因特网服务提供商(ISP)接入英特网。每个Isp本身就是一个由多态分组交换机和多段通信链路组成的网络
端系统、分组交换机和其他一系列因特网部件都要运行一系列 #协议 。这些协议控制者因特网中信息的接受和发送。 #TCP 和 #IP 是因特网中最为重要的两个协议。IP协议定义了在路由器和端系统之间发送和接受的分组格式。因特网的主要协议统称为<font color="#0070c0">TCP/IP</font>

## 网络边缘
因为这些端系统位于因特网的边缘，所以称他们为端系统。端系统也有时候被称为 #主机 （host）。主机又被进一步划分为 #客户端 #服务器 

## 接入网
我们考虑 #接入网 这是指将端系统物理连接到其 #边缘路由器 的网络。边缘路由器是端系统到任何其他远成端系统的路径上的第一台路由器
1. 家庭接入：DSL，电缆，FTTH，拨号和卫星
	1. 今天，宽带住宅接入又两种最流行的形式：数字用户线DSL和电缆。住户通常从提供本地电话接入的本地电话公司获得DSL因特网接入。因此，使用DSL时，用户的本地电话公式也是他的ISP。。
2. 企业（和家庭）接入：以太网和WIFI
	1. 在公司和大学校园以及越来越多的家庭使用 #局域网 (LAN)将端系统链接边缘路由器
3. 广域无线接入：3G和LTE

## 物理媒体
对于每个发射器和接收器，通过跨越一种物理媒体传播电磁波和光脉冲来发送比特。物理媒体可以分为导引性媒体和非导引型媒体
可以大体上分为
1. 双绞铜线
2. 同轴电缆
3. 光纤
4. 路地无线电信道
5. 卫星无线电信道

## 网络核心
在各类网络应用中，端系统彼此交换 #报文 报文能够包含协议设计者需要的任何东西。为了从源端口向目的端口系统发送一个报文，源端口将报文划分为小数据块，称之为分组。在源和目的地之间，每个分组都要通过通信链路和分组交换机。分组以等于该链路最大传输速率的速度传输通过该通信链路。因此如果发送一个L比特分组，链路的传输速率为R比特/秒，那么需要L/R秒
### 储存转发传输
多数分组交换机在链路的输入端使用储存转发传输机制。该机制是指交换机在开始向输出链路传输该分组的第一个比特之前，必须接收到整个分组。
比如源已传输了分组1的一部分，分组1的前沿已经到达了路由器。因为该路由器使用了储存转发机制，所以他还不能传输接收到的比特。在他接收到所有比特之后才能开始传输。设源在时刻0开始输出，在时刻L/R秒，路由器接受到了整个分组，所以才能开始向着目的地输出。在2L/R，路由器已经传输了整个分组。所以总时延为2L/R。如果一接收就传输，时间为L/R
所以在时间NL/R,目的地接受了n-1个分组
![[Pasted image 20221122224527.png]]
现在是一般情况，如果有N条速率为R的链路组成的路径，及有N-1台路由器，从源发送一个分组，时延为NL/R

### 排队延时和分组丢失
每台分组交换机有多条链路与之相连，对于每条相连的链路，该分组交换机具有一个 #输出缓存 （也叫输出队列）用于储存路由器准备发往那条链路的分组。该输出缓存在分组中起着重要作用，如果到达的分组需要发往某条链路，但是该分组很忙，那么需要子啊输出缓存中等待。因此，他需要承受输出缓存的 #排队时延 。但是如果输出缓存满了，则会发生 #分组丢失 又叫丢包。

### 转发表和路由选择协议
每台路由器都有一个 #转发表 ，用于将目的地址映射成为输出链路。当某个分组到达一台路由器，路由器检查改地址，并用这个目的地址搜素转发表，发现适当的输出链路则将该分组导向改输出链路。

### 电路交换
通过网络链路和交换机移动数据有两种基本方法， #电路交换 和 #分组交换 
电路交换网络，两个端系统之间会预留通信所需要的资源。这种资源在分组交换网络中是不能预留的。像电话，两个端系统之间有一条物理的线（称为电路），是一条专用的端到端链接
#### 电路交换网络中的复用
链路中的电路是通过 #频分复用 （FDM）或者 #时分复用 （TDM）对于FDM，链路的频谱由跨越链路创建的所有链接共享，如果频段的宽度为4kHZ，频段的宽度称为 #带宽 
对于一条TDM链路，时间被划分为固定期间的帧，每个帧又被划分为固定数量的时隙，每个链接单独使用一个指定的时隙。对于TDM,一条电路的传输速率等于帧速率乘以一个时隙中的比特数量。例如，如果链路每秒传输8000个帧，每个时隙由8个比特组成，则每条电路的传输速率是64kbps。
![[Pasted image 20221122232014.png]]

## 对比分组交换和电路交换

分组交换的性能够优于电路交换的性能。这些例子也强调了在多个数据流之间共享链路传输速率的两种形式的关键差异。电路交换不考虑需求，而预先分配了传输链路的使用，这使得已分配而并不需要的链路时间未被利用。另一方面，分组交换按需分配链路使用。链路传输能力将在所有需要在链路上传输分组的用户之间逐分组地被共享。
虽然分组交换和电路交换在今天的电信网络中都是普遍采用的方式，但趋势无疑是朝着分组交换方向发展。甚至许多今天的电路交换电话网正在缓慢地向分组交换迁移。特别是，电话网经常在昂贵的海外电话部分使用分组交换。

## 时延丢包和吞吐率
### 分组交换网络中的时延概述
时延主要包括节点处理时延，排队时延，传输时延和传播时延。这些时延累加起来就形成了节点总时延
#### 处理时延
检查分组首部和决定将该分组导向何处所需要的时间称为处理时延
#### 排队时延
在队列中，当分组在链路上等待传输时，他经受传播时延。排队时延决定于正在排队的分组数。
#### 传输时延
假定分组以先到先服务方式传输，仅当所有分组都被传输，才能传输刚刚到的分组传输时延时L/R，
#### 传播时延
该链路起点到路由器B传播所需要的时间是传播时延，传输速度取决于链路的物理媒介。

### 排队时延和丢包
节点时延最复杂的是排队时延，a表示分组到达队列的平均速度，每个分组L比特，R为传播速率，那么平均到达速率为La。比率La/R被称为 #流量强度 。流量强度不能大于1！
![[Pasted image 20221122233511.png]]

## 协议分层
计算机网络自顶向下可以分为5层：
1. #应用层 应用层是网络应用程序和他们的应用层协议存留的地方，例如SMTP协议，HTTP协议和FTP。应用层协议分布在各个端系统上，而一个端系统中的应用程序使用协议与另一个端系统中的应用交换信息分组，我们称应用层信息分组为 #报文 
2. #运输层 运输层在应用程序端点之间传送应用层报文。主要是 #TCP 和 #UDP 其中TCP确保到达目的地的和流量控制和拥塞控制，是面向连接服务的。UDP提供无连接服务，不一定确保到达，没有可靠性，流量控制与拥塞控制。运输层分组称为 #报文段 。
3. #网络层 网络层负责将 #数据包 的网络层分组从一台主机移动到另一台主机。一台源主机通过TCP或UDP向网络层递交运输层报文段和目的地址。网络层知名协议 #IP 定义了数据包中各个字段以及端系统和路由器如何作用于这些字段。
4.  #链路层 因特网的网络通过源和目的地之间的一系列路由器由数据报。为了将分组从一个节点传输到路径上的下一个节点，网络层必须依赖链路层的服务，特别是在每个节点，网络层将数据包下传给链路层，链路层沿着路径将数据包传递给下一个节点。在下一个节点，链路层将数据包上传给网络层。我们将链路层分组称为 #帧 
5.  #物理层 虽然链路层的任务试讲整个帧从一个网络元素移动到临近的网络元素，而物理层的任务就是将帧中的每一个比特移动到下一个节点。这层的协议与链路的实际传输媒介有关。

## 封装
图1-24说明了疯转的重要概念。在发送端主机，一个 #应用层报文 被传输给运输层，运输层收到报文并且附上附加信息H1，该首部将被接收端的运输层使用。应用层报文和运输层手不行西一起构成了 #运输层报文段 。附加的信息包括：允许接收端运输层向上向适当的应用程序交付报文；差错检测。运输层向网络层传递报文段，网络层增加如源和端的地址等网络层首部信息，生成了 
#网络层数据报 。改数据报接下俩传递给链路层，链路层增加自己的链路层首部信息形成 #链路层帧  
![[Pasted image 20221123083135.png]]