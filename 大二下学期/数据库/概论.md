# 数据库概述
>数据库是长期存储在计算机内有组织、大量、共享的数据集合。它可以供各种用户共享，具有最小冗余度和较高的数据独立性。数据库管理系统在数据库建立、运用和维护时对数据库进行统一控制，以保证数据的完整性和安全性，并在多用户同时使用数据库时进行并发控制，在发生故障后对数据库进行恢复。

数据独立性高:包括逻辑独立性和物理独立性
安全性检查:数据不被不合法的方式使用造成数据泄露
完整性检查:数据的正确性,有效性和合理性
概念模型,逻辑模型(关系模型,层次模型,网状模型)和物理模型(对底层数据的抽象)
## 数据库的四个基本概念
数据,数据库,数据库管理系统和数据库技术是四个密切相关的概念
### 数据
数据是数据库中储存的基本对象,描述事务的符号就是数据.数据的含义称为数据的语义,语义与数据密不可分.
### 数据库
数据库,顾名思义就是存放数据的仓库.严格来说,数据库就是<font color="#ff0000">长期存储在计算机内,有组织,可共享的</font>大量数据的集合.数据库中的数据按照一定的数据模型组织,描述和存储,具有较小的冗余度,较高的数据独立性和易扩展性,并且可为各种用户共享
综上数据库具有的三个基本特点为:<font color="#ff0000">永久储存,有组织和可共享</font>三个基本特点.
### 数据库管理系统 DBMS
数据库管理系统是计算机的基本软件,主要包括以下几个方面
1. 数据定义功能:数据库可以通过数据库定义语言DDL对数据库中的数据对象组成与结构进行定义.
2. 数据组织,存储和管理:数据库管理系统要分类组织,存储和管理各种数据,包括数据字典,用户数据,数据存储路径等等,要提高数据空间利用率和查找速度
3. 数据操纵功能:数据库管理系统提供了数据操纵语言DML,用户可以使用他曹总数据,实现对数据库的基本操作,,比如查询插入,删除和修改
4. 数据库的事务管理和运行管理:数据库保证数据的完整性安全性并发操作以及故障修复
5. 数据库的建立和维护:
6. others

### 数据库系统 DBS
数据库系统由数据库,数据库管理系统,应用程序和数据库管理员组成的存储,管理处理和维护数据的系统
![[Pasted image 20230301151657.png]]
## 数据管理系统的演化发展
数据库总体上经厉了三个阶段:<font color="#ff0000">人工管理,文件系统和数据库系统</font>
### 人工管理阶段
当时技术不发达,靠人,特点如下
1. 数据不保存,即输即用
2. 应用程序管理数据
3. 数据不共享,一组数据只能对应一个程序,多个程序之间的数据必须单独定义
4. 数据不具有独立性:数据的逻辑结构修改之后必须对应用程序做出相应的改变,数据完全依赖于应用
------
### 文件系统阶段
1. 数据可以长期保存
2. 由文件系统管理数据,但是
	1. 数据共享性差,冗余度大(一组数据不知道另一组的存在),一组数据只对应一个程序,同种数据重复存储
	2. 数据独立性差,难以修改数据的逻辑结构,依赖于程序
	3. 空间浪费,而且一组数据放了好几组,容易带来数据的错误冲突/不一致
无法实现数据共享
-----
### 数据库系统阶段
![[Pasted image 20230301151721.png]]
从文件系统到数据库系统阶段标志管理技术飞跃

## 数据库系统的特点
### 数据结构化
数据库系统实现<font color="#ff0000">整体数据的结构化</font>,这是数据库的主要特征之一,也是数据库系统与文件系统的本质区别.所谓整体结构化就是数据库中的数据不在针对一个应用,而是面向整个组织或企业,不仅数据内部结构化,而且整体结构化,数据之间也相互联系
结构化示意图↓
![[Pasted image 20230301152345.png]] 
### 数据的共享性高,冗余度低且易扩充
由于数据面向整个系统,所以数据可以被不同个体共享使用,数据共享可以大大减少数据冗余,节约内存空间,还能避免数据之间的不相容性.这使得整个数据库易于扩充
(不一致性:同一个数据有不同副本,比如一个人俩学号)
### 数据独立性高
数据独立性是数据库的一个显著优点,其中包括物理独立性和逻辑独立性
物理独立性指应用程序与数据的物理存储相互独立,也就是用户不需要关心数据如何存储
逻辑独立性指应用于数据库的逻辑结构独立,数据结构改变,应用可以不变
### 数据库由DBMS统一管理
<font color="#ff0000">数据的安全性</font>表示保护数据防止不合法使用造成的数据泄密和破坏
<font color="#ff0000">数据的完整性</font>表示数据的正确性,有效性和相容性
还有并发控制和数据库恢复的神奇功效
# 数据库的数据类型
元数据:结构的描述信息,提供结构和数据的独立性,也就是描述数据的数据,用来描述数据库的构成之类的底层数据,比如数据表的结构,用户有哪些
主数据（MD Master Data）大概就是用户存储的数据
# 数据模型
数据模型就是对现实世界的抽象描述,用来描述,组织和操作数据的,是数据库的核心和基础.数据模型应该满足:能较好的模拟现实世界,容易被理解,便于在计算机上实现.人们常常把现实世界抽象为信息世界,然后将信息世界转换为机器世界
数据模型由数据结构,数据操作和完整性约束构成(完整性约束有哪些?)
按照模型应用目的不同,模型大致划分为两类
1) 概念模型,按照用户的观点对数据建模,主要用于设计数据库
2) 逻辑/物理模型:物理模型即数据怎么在计算机存储,逻辑模型为概念模型在计算机上的建模

常用的数据模型有:网状,层次,关系,我们使用的一般为关系数据库
概念建模不包括实现细节
描述数据之间的关系和数据的约束,包含结构部分,允许的操作部分,一定的完整性约束
![[Pasted image 20230307085008.png]]
数据库都要和数据管理器打交道
system catalog 数据字典,存放数据库元数据的集合,数据字典本身也是一张一张表,叫做数据字典表.任何用户对于数据库的一切操作都要先到数据字典里查看有没有这个用户.
## 基于对象的数据模型
ER图描述数据的联系(什么是ER图?ER图怎么画?)
## 基于记录的数据模型
我们目前主要有如下三种结构存放数据
- 二维表
- 网状 图
- 层次 树

关系型数据库中使用的是二维表来存放数据
## 概念模型
概念模型实际上就是现实世界到机器世界的一个中间抽象层次.
概念模型有如下几个概念
### 实体
客观存在的东西叫实体,比如人,事,物
### 属性
事物的特征,比如人的体重姓名
### 码
能够唯一标识实体的属性叫码,比如身份证号
### 实体集
同一种实体的全集,比如全体学生
### 联系
实体和实体的关系,有一对一,一对多和多对多三种关系,比如一夫一妻是一对一关系(你最好不要一对多),班长和学生是一对多,老师和学生是多对多
一般使用ER图来直观表示关系

## 关系数据库
关系数据库是建立在严格的数学概念上的
1. 关系:就是那张表
2. 元组:一条数据记录
3. 属性:一列,比如名字
4. 码:能够唯一确定一个元组
5. 域:属性的取值范围
6. 分量:元组的一个属性值
7. 关系模式:表结构,比如学生(学号,姓名,性别,班级)

关系模型必须规范化,要求每个分量必须是一个不可分的数据项,简单来说就是不能表套表

# 数据库系统的结构
数据库的结构被划分为用户级,概念级和存储级
数据库有三级模式两级映射![[Pasted image 20230301155247.png]]
## 数据库中的三级模式
### 模式
模式又称逻辑模式,<font color="#ff0000">是数据库中全体数据的逻辑结构和特征的描述</font>,是所有用户的公共数据视图,DBMS用(模式DDL)模式数据定义语言来严格的定义模式,存放了数据库的描述(结构)
<font color="#ff0000">数据库就一个模式</font>
### 外模式
外模式也叫子模式或用户模式,他是用户能看见和使用的局部数据的逻辑结构和特征的描述,是数据库用户的数据视图.外模式由外模式DDL语言定义
一个数据库通常有多个外模式,通过外模式,用户只能看见对应的数据而看不到内部数据,保证了数据库的安全性
### 内模式
内模式也叫存储模式,一个数据库只有一个内模式,他是数据物理结构和存储方式的描述,是数据在数据库内部的组织方式

## 数据库的二级映像和数据独立性
为了能够在系统内部实现三个抽象层级的联系与转换,DBMS提供了两层映像:外模式/模式映像,模式/内模式映像,从而保证了数据的逻辑独立性和物理独立性
### 外模式-模式映像
定义了外模式与模式的对应关系
当模式改变.有数据库管理员对各个外模式/模式映像修改,保证外模式不变.应用程序基于外模式修改,所以应用也不用改变,保证了<font color="#ff0000">数据与程序的逻辑独立性</font>.但是不能百分百保证,比如我把表删了,那么外模式一定要变
### 模式/内模式映像
当存储结构改变,由管理员修改模式/内模式映像,使模式保持不变,从而程序也不用修改,保证了<font color="#ff0000">数据与程序的物理独立性</font>,比如我把数据存储的地方从c盘放到d盘,模式不需要改变,或者底层从B+树改为hash表也不需要变
二级映像保证了app的稳定性,除非应用本身需求改变,不需要修改app

# 数据库操作人员
![[Pasted image 20230327192605.png]]
Date Administrator 保证数据本身的正确性,清洗数据
DataBase Administrator 保证数据库系统的正常运行,搞搞备份
Database Designers 设计逻辑和物理模型
Application Programmers 
End Users

# 逻辑独立性和物理独立性
- 逻辑独立性:模式的修改不影响外模式,即用户程序不一定改变,但如果直接把表删了程序也要改,通过外模式-模式映像实现
- 物理独立性:修改了存储不用修改模式,一定能实现,通过内模式-模式映像实现

数据库的机构被划分为外部层/用户层,概念层和存储层

# 数据库语言
DDL date definition language,在建表的时候可以加入约束条件,如果不满足不被拒绝,还可以给用户授权,用来定义表结构
DCL date control language 数据控制语言 用来授权或回收访问数据库的某种特权，并控制数据库操纵事务发生的时间及效果，能够对数据库进行监视。比如常见的授权、取消授权、回滚、提交等等操作。
DML date manipulation language 数据操纵语言 增删改